# Handoff Protocol

> Shared conventions for the Gemini (Architect) and Claude Code (Builder) collaboration.
> Both agents strictly adhere to the **Get Shit Done (GSD)** framework for planning and execution.

## Roles

- **Gemini (Architect):** Handles the GSD Planning Phase. Runs `/gsd:new-project`, `/gsd:discuss-phase`, and `/gsd:plan-phase`. Responsible for research, UI/UX design, architecture decisions, and generating strict XML `PLAN.md` files. Does NOT write executable source code.
- **Claude Code (Builder):** Handles the GSD Execution Phase. Runs `/gsd:execute-phase`. Executes the XML plans generated by Gemini, writes code, runs verification tests, and creates atomic Git commits. Does NOT make unilateral architectural decisions outside the XML spec.

## Specification Format (GSD)

All planning and specification is handled through GSD's automated files in the root directory:

- `PROJECT.md`, `REQUIREMENTS.md`, `ROADMAP.md` — High-level architecture and scope (Generated by Gemini via `/gsd:new-project`)
- `{phase_num}-CONTEXT.md` — UI/UX and architectural decisions for a specific phase (Generated by Gemini via `/gsd:discuss-phase`)
- `{phase_num}-{N}-PLAN.md` — Atomic, XML-formatted implementation plans (Generated by Gemini via `/gsd:plan-phase`)

**Manual Markdown specs in `/docs/` are deprecated.** Gemini must use GSD's exact XML structure for all tasks handed to Claude Code.

## Definition of Done (Plans)

A GSD XML plan (`{phase_num}-{N}-PLAN.md`) is not complete until it includes:
1. `<task>` — Clear, scope-limited objective.
2. `<action>` — Unambiguous implementation steps (what files to touch, what logic to write).
3. `<verify>` — Exact terminal commands or scripts to prove the code works.
4. `<done>` — The success criteria for the verification step.

## Task Execution (Claude Code)

When Claude Code is invoked to build a feature, it must use GSD's execution engine:
```bash
/gsd:execute-phase [phase_num]
```

Claude Code relies on GSD to:
1. Orchestrate the order of execution (Waves).
2. Spawn fresh subagents for isolated context.
3. Automatically verify the work using the commands in the `<verify>` block.
4. Generate atomic Git commits per completed task.

If a plan fails verification or is ambiguous, Claude Code must report the failure block back to the user/Gemini rather than guessing the architecture.

## Archiving
GSD automatically handles state management and archiving (`STATE.md`, `{phase_num}-SUMMARY.md`). Do not manually move files to `/docs/archive/` anymore.
