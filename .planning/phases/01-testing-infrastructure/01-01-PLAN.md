---
wave: 1
depends_on: []
files_modified:
  - package.json
  - vitest.config.ts
  - playwright.config.ts
  - .github/workflows/test.yml
autonomous: true
---

# 01-01: Testing Infrastructure Setup

## Requirements
- [x] Install and configure Vitest with React Testing Library for component/unit tests.
- [x] Install `vitest-mock-extended` or equivalent to enable DB/Prisma mocking.
- [x] Install and configure Playwright for E2E browser tests.
- [x] Configure a GitHub Actions CI/CD workflow to run all tests automatically on pull requests to the main branch.

## Tasks

<task>
<objective>Install missing testing dependencies.</objective>
<action>
1. Run `npm install -D vitest @vitejs/plugin-react jsdom @testing-library/react @testing-library/dom @testing-library/user-event vitest-mock-extended`.
</action>
<verify>
cat package.json | grep vitest
</verify>
<done>Dependencies appear in package.json.</done>
</task>

<task>
<objective>Configure Vitest and React Testing Library.</objective>
<action>
1. Create `vitest.config.ts` in the root explicitly configuring `jsdom` environment and the `@vitejs/plugin-react` plugin. Ensure aliases like `@/` properly resolve to `src/`.
2. Update `package.json` scripts to include `"test": "vitest run"` and `"test:watch": "vitest"`.
</action>
<verify>
npm run test
</verify>
<done>Vitest runs successfully (even if it reports "No test files found").</done>
</task>

<task>
<objective>Install Playwright Framework.</objective>
<action>
1. Run `npx playwright install --with-deps` alongside the Playwright setup command.
2. Initialize playwright configuration if `playwright.config.ts` does not exist: `npm init playwright@latest` (select TS, default tests folder, GitHub Actions workflow).
</action>
<verify>
cat playwright.config.ts
</verify>
<done>Playwright initialized.</done>
</task>

<task>
<objective>Configure Playwright E2E settings.</objective>
<action>
1. Open `playwright.config.ts`.
2. Set the `baseURL` to `http://localhost:3000` (so tests map locally).
3. Ensure the `webServer` option is configured to run `npm run dev` starting on port 3000 before running tests mapped to localhost.
</action>
<verify>
cat playwright.config.ts | grep baseURL -A 10
</verify>
<done>Playwright config points to the local dev server.</done>
</task>

<task>
<objective>Finalize GitHub Actions Testing Workflow.</objective>
<action>
1. Update `.github/workflows/playwright.yml` (generated by Playwright setup) to include a step that also runs `npm run test` (Vitest) before the E2E tests.
2. Rename the workflow file to `.github/workflows/testing.yml` to reflect both unit and CI tests.
</action>
<verify>
cat .github/workflows/testing.yml | grep vitest
</verify>
<done>The workflow file includes steps for both tests.</done>
</task>
