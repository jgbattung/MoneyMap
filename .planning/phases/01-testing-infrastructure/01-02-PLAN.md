---
wave: 2
depends_on: ["01-01"]
files_modified:
  - tests/
  - e2e/
autonomous: true
---

# 01-02: Foundational Test Writing

## Requirements
- [x] Hook up the `.claude/skills/generate-tests` and `run-and-heal-tests` scripts for Claude Code.
- [x] Write foundational unit tests for critical utility functions and custom hooks (e.g., data formatting).
- [x] Write initial E2E tests covering the core user flows (Sign Up, Sign In, Basic Dashboard Load).

## Tasks

<task>
<objective>Create Vitest Unit/Component Tests.</objective>
<action>
1. Use your `generate-tests` skill to write a suite of tests for any core `lib/` utilities (like data formatting or currency converters).
2. Generate tests for the most common reusable UI components in `components/ui` (e.g. Buttons, Inputs).
3. If applicable, generate tests for the `useSession` or similar auth-related hooks using the `vitest-mock-extended` approach.
</action>
<verify>
npm run test
</verify>
<done>All newly generated Vitest tests pass.</done>
</task>

<task>
<objective>Create E2E Setup and Auth Fixtures.</objective>
<action>
1. Evaluate the E2E setup. Write an E2E test helper/fixture file (`e2e/fixtures/setup-auth.ts`) that handles automated login scenarios to save state before tests run. 
2. Ensure you have the generic testing credentials registered in your local DB so E2E tests can interact with the app.
</action>
<verify>
npx playwright test e2e/fixtures/setup-auth.ts --project=setup
</verify>
<done>A reusable authed state is saved locally.</done>
</task>

<task>
<objective>Create core E2E flows.</objective>
<action>
1. Write `e2e/auth-flow.spec.ts` testing Sign-Up and Sign-In flows.
2. Write `e2e/dashboard-flow.spec.ts` to ensure the main dashboard successfully loads and renders user data.
3. Use the `run-and-heal-tests` skill to iterate these until they are green.
</action>
<verify>
npx playwright test
</verify>
<done>All Playwright tests pass.</done>
</task>
